{% extends 'base_template.html' %}

{% block content %}

    {% load static %}
    <script src="{% static 'scripts/Chart.min.js' %}"></script>

    <input type="hidden" id="runs_scored_per_match" value="{{runs_scored_per_match}}">
    <input type="hidden" id="run_distribution" value="{{run_distribution}}">
    <input type="hidden" id="economy_per_match" value="{{economy}}">

    <div class="row mt-3 mx-1 mb-0">
        <div class="col-10">
            <h3 class="text-success">{{name}}</h3>
        </div>
    </div>
    <hr class="mx-3 mt-0">
    <div class="row mx-1">
        <div class="col-sm-3 my-2">
            <div class="card bg-dark shadow-card">
                <div class="card-body text-success">
                    <h6 class="mt-1 mb-3">Total Runs: {{total_runs}}</h6>
                    <h6 class="mb-3">Average: {{average}}</h6>
                    <h6 class="mb-3">Strike Rate: {{strike_rate}}</h6>
                    <h6 class="mb-3">High Score: {{high_score}}</h6>
                    <h6 class="mb-3">Fours: {{fours}}</h6>
                    <h6 class="mb-3">Sixes: {{sixes}}</h6>
                    <h6 class="mb-3">Economy: {{overall_economy}}</h6>
                </div>
            </div>
        </div>

        <div class="col-sm-9 my-2">
            <div class="nav nav-tabs" id="tab_bar">
                <li class="nav-item nav-link text-success active" id="batting_tab">Batting</li>
                <li class="nav-item nav-link text-success" id="scores_tab">Scores</li>
                <li class="nav-item nav-link text-success" id="run_dist_tab">Run Distribution</li>
                <li class="nav-item nav-link text-success" id="bowling_tab">Bowling</li>
                <li class="nav-item nav-link text-success" id="econ_tab">Economy</li>
            </div>

            <div id="batting_scorecard_container" class="scorecard_container p-3 containers">

                <table class="table table-striped table-responsive text-center">
                    <thead class="bg-dark text-success">
                        <tr>
                            <th>Match id</th>
                            <th>Runs Scored</th>
                            <th>Balls Faced</th>
                            <th>Fours</th>
                            <th>Sixes</th>
                            <th>Strike Rate</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for performance in performances %}
                            <tr>
                                <td> <a class="text-success font-weight-bold" href="{% url 'user:match_stats' performance.match_id %}" style="text-decoration: none; color: initial;"> Match #{{performance.match_id}} </a> </td>
                                <td>{{performance.runs}}</td>
                                <td>{{performance.balls_faced}}</td>
                                <td>{{performance.fours}}</td>
                                <td>{{performance.sixes}}</td>
                                <td>{{performance.strike_rate}}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div id="bowling_scorecard_container" class="scorecard_container p-3 containers d-none">

                <table class="table table-striped table-responsive text-center">
                    <thead class="bg-dark text-success">
                        <tr>
                            <th>Match id</th>
                            <th>Runs</th>
                            <th>Overs</th>
                            <th>Wickets</th>
                            <th>Economy</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for performance in bowling_performances %}
                            <tr>
                                <td> <a class="text-success font-weight-bold" href="{% url 'user:match_stats' performance.match_id %}" style="text-decoration: none; color: initial;"> Match #{{performance.match_id}} </a> </td>
                                <td>{{performance.runs}}</td>
                                <td>{{performance.overs}}</td>
                                <td>{{performance.wickets}}</td>
                                <td>{{performance.economy}}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div class="chart_container mx-auto mt-3 d-none containers" style="position: relative; width: 90%; height: 50vh;">
                <canvas id="line_chart_area" class="bg-dark rounded p-3 d-none chart-area"></canvas>
                <canvas id="pie_chart_area" class="bg-dark rounded p-3 d-none chart-area"></canvas>
                <canvas id="econ_chart_area" class="bg-dark rounded p-3 d-none chart-area"></canvas>
            </div>

        </div>
    </div>

    <script src="{% static 'scripts/update_chart.js' %}"></script>

{% endblock %}